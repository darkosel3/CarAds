@model CarAds.Models.Ad

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


<section class="details-section">
    <div class="details-card">
        <div class="details-image">
            <img src="@GetFirstImage(@Model)" alt="@Model.Brand @Model.Model" />
        </div>

        <div class="details-content">
            <h1>@Model.Brand @Model.Model (@Model.Year)</h1>
            <div class="details-info">
                <p><strong>Mileage:</strong> @Model.Kilometers km</p>
                <p><strong>Fuel:</strong> @Model.Fuel</p>
                <p><strong>Price:</strong> €@Model.Price</p>
                <p><strong>Description:</strong></p>
                <p class="description-text">@Model.Description</p>
            </div>

            <div class="details-actions">
                <a href="/Cars/Edit/@Model.Id" class="btn elegant-btn edit-btn">Edit</a>
                <form asp-action="Delete" asp-route-id="@Model.Id" method="post" style="display:inline;">
                    <button type="submit" class="btn elegant-btn delete-btn" onclick="return confirm('Are you sure you want to delete this car?');">Delete</button>
                </form>
            </div>
        </div>
    </div>
</section>


@section Styles {
    <link rel="stylesheet" href="~/css/details.css" />
}

@functions {
    string GetFirstImage(CarAds.Models.Ad car)
    {
        if (car.Images != null && car.Images.Any())
        {
            var base64Image = Convert.ToBase64String(car.Images[0].AsByteArray);
            return $"data:image/jpeg;base64,{base64Image}";
        }
        return "";
    }
}

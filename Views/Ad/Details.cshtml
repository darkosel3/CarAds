@model CarAds.Models.Ad

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";

}


<section class="details-section">
    <div class="details-card">
        <div class="details-image">
            <img src="@GetFirstImage(@Model)" alt="@Model.Brand @Model.Model" />
        </div>

        <div class="details-content">
            <h1>@Model.Brand @Model.Model (@Model.Year)</h1>
            <div class="details-info">
                <p><strong>Mileage:</strong> @Model.Kilometers km</p>
                <p><strong>Fuel:</strong> @Model.Fuel</p>
                <p><strong>Price:</strong> €@Model.Price</p>
                <p><strong>Description:</strong></p>
                <p class="description-text">@Model.Description</p>
            </div>
        </div>
    </div>
</section>
<section class="comment-section">
    <form asp-action="AddComment" asp-controller="Ad" method="post">
        <input type="hidden" name="adId" value="@Model.Id" />
        <textarea name="content" required placeholder="Unesite komentar..."></textarea>
        <button type="submit">Dodaj komentar</button>
    </form>
</section>


@section Styles {
    <link rel="stylesheet" href="~/css/details.css" />
}

@functions {
    string GetFirstImage(CarAds.Models.Ad car)
    {
        if (car.Images != null && car.Images.Any())
        {
            var base64Image = Convert.ToBase64String(car.Images[0].AsByteArray);
            return $"data:image/jpeg;base64,{base64Image}";
        }
        return "";
    }
}
